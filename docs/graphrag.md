# Graph RAG For Chat2Anything

## 示例文档

```markdown
# 标题：星海市的政商关系与社会结构分析

在星海市这个繁华的都市中，政界与商界、文化界之间存在着错综复杂的关系网络。星海市的市长李建国在任职期间与多家企业和非营利组织保持着紧密联系。星海市的主要大型企业之一——星海集团，由商人王振东创建并经营，专注于房地产、能源和基础设施建设等领域。王振东不仅是商界的领军人物，同时也是星海市慈善基金会的常任理事。

## 李建国与王振东的关系

李建国市长与王振东的关系密切，二人经常共同出席城市发展研讨会和招商引资活动。星海市在五年前的大规模城市改造计划中，李建国市长特批了星海集团的多个建设项目，这些项目包括建设新的购物中心、办公楼和住宅区。

在市政府与星海集团的合作项目中，市政府主要提供土地使用支持，而星海集团则负责建设和运营管理。这些项目的收益中部分回流至星海市政府的财政，用于支持其他基础设施的改建和城市公园的修缮。

## 星海慈善基金会的社会影响

星海慈善基金会是星海市最大的慈善机构之一，致力于儿童教育、医疗援助和环境保护。星海集团是基金会的主要资助方之一，而基金会理事会主席赵雅琴是李建国市长的大学同学。李建国市长通过赵雅琴积极参与基金会的公益活动，以提高其在公众中的形象和声望。

在过去三年中，星海慈善基金会资助了多个教育和医疗项目，包括在贫困社区设立健康中心和奖学金项目。赵雅琴也经常邀请王振东和其他商界人士为基金会捐款，并在慈善活动中提供商业资源支持。这使得星海慈善基金会在星海市民中享有很高的声誉，同时也强化了市长、商人和公益组织之间的关系纽带。

## 市长与警方的紧密合作

星海市的公安局局长陈浩是李建国市长的亲信。在李建国市长上任之初，星海市的治安状况较为混乱，因此他指派陈浩全面负责打击犯罪和改善治安环境。陈浩局长也迅速采取了多项措施，成功降低了星海市的犯罪率。为表彰其贡献，市长授予陈浩市政功勋奖。

陈浩局长的治安整顿工作得到了星海商界的广泛支持，特别是星海集团提供了资金援助，用于安装城市监控设备，确保星海市的安全。警方还与星海慈善基金会合作，帮助无家可归者和青少年，试图从源头上减少治安问题。

## 星海大学与城市发展的合作

星海大学是星海市唯一一所重点大学，校长林安与李建国市长也有良好的关系。星海大学的研究中心曾多次为市政府提供城市规划和环境保护的研究报告。王振东的星海集团还在星海大学设立了多个奖学金和实习项目，以吸引优秀的毕业生加入其公司。

星海大学的商学院教授孙琳琳与王振东合著了一本关于城市发展和企业社会责任的书籍，并受邀在市政府举办的学术交流会上做主题演讲。这本书籍被广泛传播，成为市政府规划决策中的参考资料之一。

## 总结

星海市的政界、商界、学界和公益界通过合作和互利的方式共同推动了城市的发展。在这张关系网中，李建国市长、王振东、赵雅琴、陈浩和林安等人相互支持和协作，形成了一个复杂的政商学社交圈。在星海市的各类项目和活动中，他们的互动和关系不断深化，进一步影响着城市的社会结构和公众形象。
```

## 提取文档的抽象实体

首先，我们需要从文档中提取出一些关键的抽象实体，这些抽象实体可以看作是文档内容的核心类别标签，用于提示词的缓存。抽象实体的作用是帮助系统从复杂的文档信息中提炼出关键信息的类别，使得接下来的处理更加高效和有针对性。例如，在句子“星海市的市长李建国在任职期间与多家企业和非营利组织保持着紧密联系”中，我们可以提取出如“职位”、“人名”、“企业”等类别，而不涉及具体的对象名称。这种处理使得系统可以基于通用的实体类别构建逻辑关系，不必依赖具体名称。

### 提示词

```markdown
提取给定文本中的所有实体的标签，你仅需要给出实体标签的英文名，不需要给出实体.
########################################################
这是已经提取过的实体标签，请不要重复提取
已提取实体标签:
{entity_lable_list}
########################################################
示例文本:
星海市的市长李建国在任职期间与多家企业和非营利组织保持着紧密联系。
示例输出:
Province,Position,Occupation,Person,Enterprise,Organization
########################################################
给定文本:
{text}
########################################################
输出:
```

### 提取的实体标签

```
Province,Position,Occupation,Person,Enterprise,Organization,Event
```



## 提取文档的具体实体对象

在识别出抽象实体的类别后，我们进一步提取文档中的具体实体对象。具体实体对象是指文档中的实际人物、地点、组织等具体信息，如“李建国”、“星海市”、“非营利组织”等。这一步骤将文档内容进一步细化，将抽象的类别具象化，为下一步关系的建立打下基础。这种具象化的过程让我们能更精确地掌握文档中的实际内容，从而在构建关系时可以更好地还原信息的细节。



### 提示词

````markdown
请你基于给定的实体标签和文本，提取出每一个实体节点，然后按照给定的输出格式输出
########################################################
输出格式(纯json格式的文本):
[
{"lable":"实体标签","attribute":[{"key":"value"}}
]
 注意，不要是markdown的json输出，我要的是纯文本的json
错误输出:
```json
[
{"lable":"实体标签","attribute":[{"key":"value"}}
]
```
########################################################
示例:
示例实体标签:
People,School,Skill,Hobby
示例文本:
小明出生于2000年一月五日，高中毕业于京海市第一中学，大学毕业于清华大学。他在大学里喜欢上了他们班的小美，但是被他们班另一个同学小王追上了小美。小明喜欢打篮球，摄影。他有许多技能，比如修电脑、会写代码。
示例输出:
[
{"lable":"People","attribute":[{"name":"小明","both":"2022-01-05"}},
{"lable":"People","attribute":[{"name":"小美"}},
{"lable":"People","attribute":[{"name":"小王"}},
{"lable":"School","attribute":[{"name":"清华大学","level":"大学"}},
{"lable":"School","attribute":[{"name":"京海市第一中学","level":"高中"}},
{"lable":"Hobby","attribute":[{"name":"打篮球"}},
{"lable":"Hobby","attribute":[{"name":"摄影"}},
{"lable":"Skill","attribute":[{"name":"修电脑"}},
{"lable":"Skill","attribute":[{"name":"写代码"}},
]
########################################################
给定实体标签:
{entity_lable_list}
########################################################
现在是给定文本:
{text}
########################################################
输出:
````

### 提取的实体对象

```json
[
    {"lable":"people","attribute":[{"name":"李建国"}]},
    {"lable":"people","attribute":[{"name":"王振东"}]},
    {"lable":"people","attribute":[{"name":"赵雅琴"}]},
    {"lable":"people","attribute":[{"name":"陈浩"}]},
    {"lable":"people","attribute":[{"name":"林安"}]},
    {"lable":"people","attribute":[{"name":"孙琳琳"}]},
    {"lable":"organizations","attribute":[{"name":"星海慈善基金会","type":"慈善机构"}]},
    {"lable":"organizations","attribute":[{"name":"星海大学","type":"大学"}]},
    {"lable":"organizations","attribute":[{"name":"星海市公安局","type":"政府机构"}]},
    {"lable":"provinces","attribute":[{"name":"星海市"}]},
    {"lable":"positions","attribute":[{"name":"市长","holder":"李建国"}]},
    {"lable":"positions","attribute":[{"name":"局长","holder":"陈浩"}]},
    {"lable":"positions","attribute":[{"name":"校长","holder":"林安"}]},
    {"lable":"positions","attribute":[{"name":"理事会主席","holder":"赵雅琴"}]},
    {"lable":"occupations","attribute":[{"name":"商人","person":"王振东"}]},
    {"lable":"enterprises","attribute":[{"name":"星海集团","field":["房地产","能源","基础设施建设"]}]}
]
```



## 建立文档中实体对象之间的关系

在获得了具体的实体对象后，我们就可以基于文档内容来构建实体对象之间的关系网络。这一步的核心在于分析不同实体对象之间的关联方式，如人物之间的合作、地理位置之间的关系、企业和非营利组织的协作等。通过建立这些关系，我们可以生成一个由节点和边组成的图结构，其中节点表示具体的实体对象，而边表示它们之间的关系。这种结构使得文档信息的呈现更加清晰，便于系统在后续的查询和检索中快速找到相关信息，同时也可以支持更深层次的知识推理和问答。

### 提示词

````markdown
请基于给定的实体和文本，提取并构建实体之间的关系，以支持知识图谱的构建。请遵循输出格式输出。
########################################################
输出格式(csv格式文本):
正确输出格式:
实体1的名字 , 关系, 实体2的名字
错误输出格式:
```csv
实体1的名字 , 关系, 实体2的名字
```
########################################################
下面是已经提取出的实体节点，请不要重复提取:
{{entity_relation_list}}
########################################################
示例实体:
[
{"lable":"People","attribute":[{"name":"小明","both":"2022-01-05"}},
{"lable":"People","attribute":[{"name":"小美"}},
{"lable":"People","attribute":[{"name":"小王"}},
{"lable":"School","attribute":[{"name":"清华大学","level":"大学"}},
{"lable":"School","attribute":[{"name":"京海市第一中学","level":"高中"}},
{"lable":"Hobby","attribute":[{"name":"打篮球"}},
{"lable":"Hobby","attribute":[{"name":"摄影"}},
{"lable":"Skill","attribute":[{"name":"修电脑"}},
{"lable":"Skill","attribute":[{"name":"写代码"}},
]
########################################################
示例文本:
小明出生于2000年一月五日，高中毕业于京海市第一中学，大学毕业于清华大学。他在大学里喜欢上了他们班的小美，但是被他们班另一个同学小王追上了小美。小明喜欢打篮球，摄影。他有许多技能，比如修电脑、会写代码。
########################################################
示例输出:
name1,entity_lable1, relation, name2,entity_lable2
小明,People,就读,京海市第一中学,School
小明,People,就读,清华大学,School
小明,People,喜欢,小美,People
小明,People,喜欢,打篮球,Hobby
小明,People,喜欢,摄影,Hobby
小王,People,追求,小美,People
小明,People,具备技能,修电脑,Skill
小明,People,具备技能,写代码,Skill
########################################################
给定实体:
{{entity_list}}
########################################################
给定文本:
{{text}}
########################################################
输出:
````

### 建立的实体对象之间的关系

```csv
name1,entity_lable1, relation, name2,entity_lable2
李建国,people,担任,市长,positions
陈浩,people,担任,局长,positions
林安,people,担任,校长,positions
赵雅琴,people,担任,理事会主席,positions
王振东,people,职业,商人,occupations
星海集团,enterprises,所属领域,房地产,enterprises
星海集团,enterprises,所属领域,能源,enterprises
星海集团,enterprises,所属领域,基础设施建设,enterprises
李建国,people,联系,星海集团,enterprises
李建国,people,支持,星海集团,enterprises
星海集团,enterprises,资助,星海慈善基金会,organizations
赵雅琴,people,领导,星海慈善基金会,organizations
李建国,people,大学同学,赵雅琴,people
李建国,people,合作,星海公安局,organizations
星海集团,enterprises,资助,星海公安局,organizations
星海公安局,organizations,合作,星海慈善基金会,organizations
林安,people,联系,星海大学,organizations
星海大学,organizations,提供,研究报告,organizations
星海集团,enterprises,设立,奖学金,organizations
王振东,people,合作,孙琳琳,people
孙琳琳,people,教授,星海大学,organizations
```





